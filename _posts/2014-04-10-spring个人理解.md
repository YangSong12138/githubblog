---
layout: post
title: spring个人理解
tags: java
---

{{ page.title }}
================

spring框架概述
--------------

Spring 框架是一个分层架构，由 7 个定义良好的模块组成。Spring 模块构建在核心容器之上，核心容器定义了创建、配置和管理 bean 的方式.

组成 Spring 框架的每个模块（或组件）都可以单独存在，或者与其他一个或多个模块联合实现。每个模块的功能如下：

核心容器：核心容器提供 Spring 框架的基本功能。核心容器的主要组件是 BeanFactory，它是工厂模式的实现。BeanFactory 使用控制反转 （IOC） 模式将应用程序的配置和依赖性规范与实际的应用程序代码分开。
Spring 上下文：Spring 上下文是一个配置文件，向 Spring 框架提供上下文信息。Spring 上下文包括企业服务，例如 JNDI、EJB、电子邮件、国际化、校验和调度功能。
Spring AOP：通过配置管理特性，Spring AOP 模块直接将面向方面的编程功能集成到了 Spring 框架中。所以，可以很容易地使 Spring 框架管理的任何对象支持 AOP。Spring AOP 模块为基于 Spring 的应用程序中的对象提供了事务管理服务。通过使用 Spring AOP，不用依赖 EJB 组件，就可以将声明性事务管理集成到应用程序中。
Spring DAO：JDBC DAO 抽象层提供了有意义的异常层次结构，可用该结构来管理异常处理和不同数据库供应商抛出的错误消息。异常层次结构简化了错误处理，并且极大地降低了需要编写的异常代码数量（例如打开和关闭连接）。Spring DAO 的面向 JDBC 的异常遵从通用的 DAO 异常层次结构。
Spring ORM：Spring 框架插入了若干个 ORM 框架，从而提供了 ORM 的对象关系工具，其中包括 JDO、Hibernate 和 iBatis SQL Map。所有这些都遵从 Spring 的通用事务和 DAO 异常层次结构。
Spring Web 模块：Web 上下文模块建立在应用程序上下文模块之上，为基于 Web 的应用程序提供了上下文。所以，Spring 框架支持与 Jakarta Struts 的集成。Web 模块还简化了处理多部分请求以及将请求参数绑定到域对象的工作。
Spring MVC 框架：MVC 框架是一个全功能的构建 Web 应用程序的 MVC 实现。通过策略接口，MVC 框架变成为高度可配置的，MVC 容纳了大量视图技术，其中包括 JSP、Velocity、Tiles、iText 和 POI。

DI依赖注入，在运行期确定依赖关系（抽象接口）beanfactory 读取 配置文件，new的方式在编译期，可扩展可服用

IOC 框架来创建对象 DI是IOC的特例

beanfactory

单例模式

三层架构模式：表示层，服务层，数据持久层，数据源

接口，不用考虑细节

序列化技术对于大量的查询数据不方便

将对象保存到关系型数据库，利用ORM

ORM框架：hibernate，ibatis

jdbc问题

1.硬编码，2.代码繁琐冗余，3.sqlexception会引入大量try-catch-4.finally，sqlexception在不同的数据库，相同的错误抛出的信息不相同。

spring解决

1.datasourse（配置数据源），2.3.模版对象和回调对象:

固定部分放在模版对象里，可变部分放在回调对象里。

	模版：					回调：

	1.加载驱动程序

	2.获取数据库连接

							3.执行可变部分代码

	4.捕获处理异常

	5.释放资源

jdbc模版类:jdbcTemplate 在dao建立jdbcTemplate属性


2.3.DAO设计模式：Data Accessor模式（CRUD）和Active Domain Object模式（实体）。

4.DataAccessException异常:runtime excepiton 

JdbcDaoSupport 继承 包括了jdbcTmplate

jdbc:Dao->datasourse  hibernate:dao->sessionfactory->datasourse

hibernate:惰性加载，使用的时候向数据库里查询数据，但由于spring框架管理session开关状态，如果session关闭，就无法加载内容，无法进行惰性加载，所以要牺牲hibernate的惰性加载

服务层事务管理：完整的业务流程

spring事务管理：

编程性事务:

transactionmanager

transactiontemple

声明性事务：写到配置文件中。改进了上面两个事务。

原来：表现层对象->服务层接口->服务层实现->dao接口

spring改进后：表现层对象->服务层接口->事务代理对象->服务层实现->dao接口

声明性事务详解：http://www.blogjava.net/robbie/archive/2009/04/05/264003.html

http://www.56.com/w37/album-aid-7873767.html


<bean id="transactionBase"  
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"  
            lazy-init="true" abstract="true">  
        <!-- 配置事务管理器 -->  
        <property name="transactionManager" ref="transactionManager" />  
        <!-- 配置事务属性 -->  
        <property name="transactionAttributes">  
            <props>  
                <prop key="*">PROPAGATION_REQUIRED</prop>  
            </props>  
        </property>  
    </bean>    
    
    <bean id="nk" parent="transactionBase" >  
        <property name="target" ref="xixi"/>   
    </bean>
    <bean id="xixitest" class="com.view">
    
    </bean>



mysql dba系统学习


AOP拦截者设计模式
日志事务缓存安全，每个组建都有方法

web轻薄的不感染其他层

如果一个框架被使用的时候，只能通过继承或实现他的某些组件，侵入型框架。

实现要比继承灵活，java单继承

springmvc非侵入，提供了丰富的视图技术
